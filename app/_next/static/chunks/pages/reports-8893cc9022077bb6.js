(global.webpackChunk_N_E=global.webpackChunk_N_E||[]).push([[53],{2041:(t,e,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/reports",function(){return n(6600)}])},8111:(t,e,n)=>{"use strict";n.d(e,{L:()=>s,N:()=>c});var a=n(4246),r=n(47),s=function(t){var e=t.title;return(0,a.jsx)("div",{className:"w-full mb-2 ",children:(0,a.jsx)("h5",{className:"font-medium w-full leading-tight text-xl mt-0 !mb-0 txt-primary",children:e})})},c=function(t){var e=t.title,n=t.extraInformations,s=t.actionButtons;return(0,a.jsxs)("div",{className:"lg:flex lg:items-center lg:justify-between mb-4",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h2",{className:"text-lg font-bold leading-7 txt-primary",children:e}),n&&(0,a.jsx)("div",{className:"mt-1 flex flex-col sm:mt-0 sm:flex-row sm:flex-wrap sm:space-x-6",children:n.map((function(t){return(0,a.jsxs)("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[t.icon?t.icon:(0,a.jsx)(r.Z,{}),t.info]})}))})]}),(0,a.jsx)("div",{className:"mt-5 flex lg:mt-0 lg:ml-4",children:s&&s.map((function(t){return(0,a.jsx)("span",{className:"sm:ml-3",children:t})}))})]})}},6600:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>F});var a=n(3842),r=n(2050),s=n(9312),c=n(4246),l=n(189),i=n(7378);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M732 120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v148h440V120zm120 212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM664 844H360V568h304v276zm164-360c0 4.4-3.6 8-8 8h-40c-4.4 0-8-3.6-8-8v-40c0-4.4 3.6-8 8-8h40c4.4 0 8 3.6 8 8v40z"}}]},name:"printer",theme:"filled"};var u=n(2644),d=function(t,e){return i.createElement(u.Z,(0,l.Z)((0,l.Z)({},t),{},{ref:e,icon:o}))};d.displayName="PrinterFilled";const m=i.forwardRef(d);var h=n(3027),f=n(5226),y=n(6591),p=n(4813),g=n(1875),x=n(5427),v=n(1328),Z=n(6178),j=n(1320),_=n.n(j),P=n(6677),S=n(8111),C=n(2166),w=n(4387),b=n(4830),N=h.Z.Column,I=h.Z.ColumnGroup;const F=function(){var t=(0,P.useRouter)(),e=((0,r.Z)(f.Z.useForm(),1)[0],(0,i.useState)(!1)),n=e[0],l=e[1],o=(0,i.useState)(!1),u=(o[0],o[1]),d=(0,i.useState)([]),j=d[0],F=d[1],D=(0,i.useState)(""),T=D[0],M=D[1],Y=(0,i.useState)(null),k=Y[0],A=Y[1],E=function(){var t=(0,a.Z)((function(){var t,e,n;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),t={studentId:T,monthYear:k},console.log(t),u(!1),l(!0),[4,(0,C.S0)(t)];case 1:return(e=a.sent())&&(F(e),l(!1)),[3,3];case 2:return n=a.sent(),console.log(n),u(!0),l(!1),[3,3];case 3:return[2]}}))}));return function(){return t.apply(this,arguments)}}();return(0,i.useEffect)((function(){E()}),[T,k]),(0,i.useEffect)((function(){A(_()().format("YYYY-MM")),E()}),[]),(0,c.jsxs)("div",{className:"mx-8 my-4 bg-white h-full px-8 py-4",children:[(0,c.jsx)(S.N,{title:"Recent Payments",actionButtons:[(0,c.jsx)(y.Z,{className:"bg-warning",onClick:function(){return function(){var t="payment reports "+_()().format("DD-MM-YYYY")+".xlsx",e=[],n=!0,a=!1,r=void 0;try{for(var s,c=j[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value,i={print_no:(0,b.O)(l.id),title:l.title,studentId:l.student.collageId,name:l.student.name,attachment:l.attachmentNo,paymentWay:l.paymentWay,total:l.total,date:_()(l.createdAT).format("D/MM/YYYY")};e.push(i)}}catch(o){a=!0,r=o}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}(0,w.p)(t,["Print No","Payment title","Student Id","Student Name","Attachment No","Payment way","Payed","Date"],e)}()},children:"Export"})]}),(0,c.jsxs)(p.Z,{title:"Payment reports : ".concat(null!=k&&k.length>0?_()(k.split("-")[1],"M").format("MMM")+", "+k.split("-")[0]:""),children:[(0,c.jsx)("div",{className:"text-right",children:(0,c.jsxs)(g.Z,{style:{marginBottom:16,textAlign:"end"},children:[(0,c.jsx)(x.Z,{placeholder:"Search by student Id",onChange:function(t){M(t.target.value)}}),(0,c.jsx)(v.Z.MonthPicker,{className:"w-full",onChange:function(t,e){A(e),console.log(e.split("-"))}})]})}),(0,c.jsxs)(h.Z,{rowKey:"id",className:"pt-4",pagination:{pageSize:10},rowClassName:"group",loading:n,bordered:!0,size:"xs",dataSource:j,children:[(0,c.jsx)(N,{title:"Payment No",dataIndex:"id",render:function(t){return(0,c.jsxs)(c.Fragment,{children:[(0,b.O)(t)," "]})}},"id"),(0,c.jsx)(N,{title:"Title",dataIndex:"title"},"title"),(0,c.jsxs)(I,{title:"Student",children:[(0,c.jsx)(N,{title:"ID",dataIndex:"student",render:function(t){return(0,c.jsx)(c.Fragment,{children:t.collageId})}},"studentId"),(0,c.jsx)(N,{title:"Name",dataIndex:"student",render:function(t){return(0,c.jsx)(c.Fragment,{children:t.name})}},"studentName")]}),(0,c.jsx)(N,{title:"Attachment No",dataIndex:"attachmentNo"},"attachmentNo"),(0,c.jsx)(N,{title:"Payment way",dataIndex:"paymentWay"},"paymentWay"),(0,c.jsx)(N,{title:"Total payment",dataIndex:"total"},"total"),(0,c.jsx)(N,{title:"Saved at",dataIndex:"createdAT",render:function(t){return(0,c.jsxs)(c.Fragment,{children:[" ",_()(t).format("D/MM/YYYY")," "]})}},"createdAT"),(0,c.jsx)(N,{title:"Actions",dataIndex:"id",render:function(e){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(Z.Z,{title:"Print",children:(0,c.jsx)(y.Z,{type:"default",onClick:function(n){return function(e){var n="/print/".concat(e);t.push(n)}(e)},shape:"circle",icon:(0,c.jsx)(m,{})})})})}},"id")]},"id")]})]})}},2166:(t,e,n)=>{"use strict";n.d(e,{BS:()=>f,DR:()=>i,Fx:()=>m,S0:()=>y,cT:()=>o,pd:()=>h,r$:()=>d,yw:()=>u});var a=n(3842),r=n(9312),s=n(1072),c=n(8625),l=n(5396),i=(function(){var t=(0,a.Z)((function(){var t;return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,c.Z.sendSync(s.j4.checkAndInitializePaymentTypesCall)];case 1:return t=e.sent(),[2,(0,l.Z)(t)];case 2:return[2,e.sent()];case 3:return[2]}}))}))}(),function(){var t=(0,a.Z)((function(){var t;return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,c.Z.sendSync(s.j4.fetchPaymentTypesCall)];case 1:return t=e.sent(),[2,(0,l.Z)(t)]}}))}));return function(){return t.apply(this,arguments)}}()),o=function(){var t=(0,a.Z)((function(){var t;return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,c.Z.sendSync(s.j4.fetchPaymentFormDataCall)];case 1:return t=e.sent(),[2,(0,l.Z)(t)]}}))}));return function(){return t.apply(this,arguments)}}(),u=function(){var t=(0,a.Z)((function(t){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,c.Z.sendSync(s.j4.changePaymentTypeStatusCall,t)];case 1:return e=n.sent(),[2,(0,l.Z)(e)]}}))}));return function(e){return t.apply(this,arguments)}}(),d=(function(){var t=(0,a.Z)((function(t){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,c.Z.sendSync(s.j4.createPaymentTypeCall,JSON.stringify(t))];case 1:return e=n.sent(),[2,(0,l.Z)(e)]}}))}))}(),function(){var t=(0,a.Z)((function(){var t,e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return"Test payment",1,"attachment","null",1e3,t={title:"Test payment",studentId:1,attachmentNo:"attachment",checkNo:"null",total:1e3,payments:[{paymentId:1,paymentTypeId:1,price:1e3,month:2,year:2020}]},[4,c.Z.sendSync(s.j4.addPaymentCall,t)];case 1:return e=n.sent(),console.log("**********************",e),[2,(0,l.Z)(e)]}}))}))}(),function(){var t=(0,a.Z)((function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return[4,c.Z.sendSync(s.j4.fetchPaymentFormsCall)];case 1:return[2,t.sent()]}}))}))}(),function(){var t=(0,a.Z)((function(t){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,c.Z.sendSync(s.j4.createPaymentFormCall,t)];case 1:return e=n.sent(),[2,(0,l.Z)(e)]}}))}));return function(e){return t.apply(this,arguments)}}()),m=function(){var t=(0,a.Z)((function(t){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,c.Z.sendSync(s.j4.changePaymentFormStateCall,t)];case 1:return e=n.sent(),[2,(0,l.Z)(e)]}}))}));return function(e){return t.apply(this,arguments)}}(),h=(function(){var t=(0,a.Z)((function(t){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,c.Z.sendSync(s.j4.fetchPaymentFormsForDepartementCall,t)];case 1:return e=n.sent(),[2,(0,l.Z)(e)]}}))}))}(),function(){var t=(0,a.Z)((function(t){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,c.Z.sendSync(s.j4.savePaymentCall,t)];case 1:return e=n.sent(),[2,(0,l.Z)(e)]}}))}));return function(e){return t.apply(this,arguments)}}()),f=(function(){var t=(0,a.Z)((function(){var t;return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,c.Z.sendSync(s.j4.fetchPaymentsCall)];case 1:return t=e.sent(),[2,(0,l.Z)(t)]}}))}))}(),function(){var t=(0,a.Z)((function(t){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,c.Z.sendSync(s.j4.getPaymentDetailsCall,t)];case 1:return e=n.sent(),[2,(0,l.Z)(e)]}}))}));return function(e){return t.apply(this,arguments)}}()),y=function(){var t=(0,a.Z)((function(t){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,c.Z.sendSync(s.j4.getMonthlyPaymentResports,t)];case 1:return e=n.sent(),[2,(0,l.Z)(e)]}}))}));return function(e){return t.apply(this,arguments)}}()},1072:(t,e,n)=>{"use strict";n.d(e,{M:()=>c,N5:()=>r,ay:()=>s,j4:()=>a});var a={fetchPaymentTypesCall:"get-all-payment-types",createPaymentTypeCall:"create-payment-type",checkAndInitializePaymentTypesCall:"check-and-initialize-payment-types",changePaymentTypeStatusCall:"change-payment-type-status",addPaymentCall:"add-payment-call",fetchPaymentFormsCall:"get-all-payment-forms",createPaymentFormCall:"create-payment-form",fetchPaymentFormDataCall:"get-payment-form-data",changePaymentFormStateCall:"change-payment-form-status",fetchPaymentFormsForDepartementCall:"fetch-payment-forms-for-departement",savePaymentCall:"save-payment",fetchPaymentsCall:"get-all-payments",getPaymentDetailsCall:"get-payment-details",getMonthlyPaymentResports:"get-monthly-payment-resports",getStudentPaymentReports:"get-student-payment-resports"},r={getAllDepartementsCall:"get-all-departements",createDepartementCall:"create-departement",deleteDepartementCall:"delete-departement"},s={getAllStudentsCall:"get-all-students",createStudentCall:"create-student",deleteStudentCall:"delete-student",getStudentsWithLessData:"get-students-with-less-data",searchStudentsById:"search-students-by-id",getStudentPaymentFormInformation:"get-student-payment-form-information"},c={exportDbCalls:"export-db-calls",importDbCalls:"import-db-calls"}},8625:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const a=require("electron");const r=n.n(a)().ipcRenderer||!1},5396:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a=function(t){try{var e=JSON.parse(t);return console.log("%c Success response:","color:white; background: green",e),e}catch(n){throw console.log("%c Error response: ","color:white; background:red",t),n}}},4387:(t,e,n)=>{"use strict";n.d(e,{p:()=>r});var a=n(4522),r=function(t,e,n){var r=a.P6.json_to_sheet(n),s=a.P6.book_new();a.P6.sheet_add_aoa(r,[e]),a.P6.sheet_add_json(r,n,{origin:"A2",skipHeader:!0}),a.P6.book_append_sheet(s,r,"Sheet1");a.NC(s,t)}},4830:(t,e,n)=>{"use strict";n.d(e,{O:()=>a});var a=function(t){return"NA"+String(t).padStart(6,"0")}},6677:(t,e,n)=>{t.exports=n(5817)},4300:t=>{"use strict";t.exports=require("buffer")},7282:t=>{"use strict";t.exports=require("process")}},t=>{t.O(0,[259,556,884,382,831,18,328,774,888,179],(()=>{return e=2041,t(t.s=e);var e}));var e=t.O();_N_E=e}]);